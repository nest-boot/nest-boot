---
title: "Redis"
description: "The @nest-boot/redis module provides Redis connection management using ioredis."
---

The `@nest-boot/redis` module provides Redis connection management using [ioredis](https://github.com/redis/ioredis). It supports automatic configuration from environment variables and graceful shutdown handling.

## Installation

```bash
npm install @nest-boot/redis ioredis
# or
pnpm add @nest-boot/redis ioredis
```

## Basic Usage

### Module Registration

```typescript
import { Module } from "@nestjs/common";
import { RedisModule } from "@nest-boot/redis";

@Module({
  imports: [
    RedisModule.register({
      host: "localhost",
      port: 6379,
      isGlobal: true,
    }),
  ],
})
export class AppModule {}
```

### Using Environment Variables

```typescript
import { Module } from "@nestjs/common";
import { RedisModule } from "@nest-boot/redis";

@Module({
  imports: [
    // Will use REDIS_* environment variables
    RedisModule.register({ isGlobal: true }),
  ],
})
export class AppModule {}
```

## Using Redis Client

Inject the `Redis` client directly into your service:

```typescript
import { Injectable } from "@nestjs/common";
import Redis from "ioredis";

@Injectable()
export class CacheService {
  constructor(private readonly redis: Redis) {}

  async get(key: string): Promise<string | null> {
    return this.redis.get(key);
  }

  async set(key: string, value: string, ttl?: number): Promise<void> {
    if (ttl) {
      await this.redis.set(key, value, "EX", ttl);
    } else {
      await this.redis.set(key, value);
    }
  }
}
```

## Environment Variables

| Variable                         | Description               |
| -------------------------------- | ------------------------- |
| `REDIS_URL`                      | Full Redis connection URL |
| `REDIS_HOST`                     | Redis server hostname     |
| `REDIS_PORT`                     | Redis server port         |
| `REDIS_DB` or `REDIS_DATABASE`   | Redis database number     |
| `REDIS_USER` or `REDIS_USERNAME` | Redis username            |
| `REDIS_PASS` or `REDIS_PASSWORD` | Redis password            |
| `REDIS_TLS`                      | Enable TLS connection     |

## Features

- **Auto Configuration** - Automatically loads settings from environment variables
- **Global Module** - Can be registered as a global module with `isGlobal: true`
- **Graceful Shutdown** - Automatically closes Redis connection on application shutdown
- **Full ioredis Support** - Access to all ioredis features (pub/sub, streams, pipelines, etc.)
